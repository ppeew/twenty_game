游戏介绍：

# snatch_card
### go后端

核心：

微服务（consul+grpc)，kong网关，gin，redis，mysql

其它：

zap日志，viper，nacos，jwt，gorm，sentinal

同时设计了诸多管道以及协程，保证抢卡游戏的并发及安全

github地址：https://github.com/ppeew/twenty_game

### flutter前端

UI用masterGo设计出来，然后手写页面并封装组件。下次再用flutter，就不手写了，整上别人的组件库。

github地址：https://github.com/unitiny/snatch-card


游戏已部署，访问: [网址](http://139.159.234.134)

## 服务测试

测试文件路径：cmd/Game-process_web/tests目录

QPS：500+

最大房间并发游戏: 10000+

单房间容纳并发连接量：50+ (TCP，过多人数会由于网络带宽，cpu处理速度导致消息不及时)

## 介绍

简介： 该游戏是一个抢牌游戏，玩家需要在限定的回合内尽可能多的凑齐能够组成总和为12的卡牌堆，凑齐即可加分，
其中游戏中会有4种特殊卡， 比如:

- 红色炸弹卡（可以炸掉其他玩家卡堆里的一张卡），

- 黄色万能卡（任意选一张数字类型卡加入自己卡堆），

- 绿色交换卡（可以用自己一张卡与其他玩家交换），

- 蓝色修改卡（修改一张自己或者他人的数字类型卡）。

卡牌使用方法，玩家可以在游戏中探索。全部回合结束后，根据玩家分数总和计算排名

#### 玩家卡牌堆的牌会被删除，满足其一：

#### 1) 当每一次取到的卡牌放入卡牌堆总和恰好为12时，分数+10，清空卡堆,不清空特殊卡

#### 2) 当取到的卡牌放入卡牌堆，总和大于12，此时不加分数，清空卡堆

#### 3) 当玩家的卡堆大于6张，则会先删除之前抢的卡，直到卡牌不超过6张



## 游戏流程

1 发牌阶段

随机生成卡牌，用户数+2张，特殊卡小于等于1张，其余全是普通卡，普通卡点数1-9.
发牌之后直接进入抢牌阶段

2 抢牌阶段

用户看手速抢牌，只能拿1张牌或不拿。计时6-8s

3 出牌阶段

只能用特殊卡，计时6-18s

4 结束阶段

每个回合计算用户得分,睡眠一会，然后进入下一轮发牌，直到回合数用完

5 结算游戏

游戏结束，计算排名，分发奖励


## 分布式项目难点

- 购买商城系统物品,购买交易系统商品都需要事务操作
- Mysql+Redis更新同步
- 游戏重连实现

